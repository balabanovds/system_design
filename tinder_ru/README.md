# Проектируем приложение для знакомств

## Функциональные требования:

- профиль: имя, возраст, пол, описание, интересы, цели для знакомства, фото (до 100)
- переписка (история бесконечная)
- подборка по возрасту, полу, интересам, цели знакомства, 
- сортировка: приоритет на лайкам, по геолокации
- при обоюдном интересе открывается чат для общения
- в чате голосовые сообщение, видео (30 секунд), текст, стикеры
- пользователь может заблокировать чат с другим пользователем
- только для мобилок
- аутентификация - привязка к номеру телефона
- язык русский и английский
- на показываем телефон


## Не функциональные требования:

- страны СНГ
- DAU 10_000_000
- в день максимум 50 новых знакомств (коннектов)
- в день лайк по 100 человек
- пользователь 1 раз в 5 дней будет обновлять профиль
- до 400 сообщений в день пишет
- до 1000 сообщений в день читает
- в выходные и пятницу повышенная нагрузка
- доступность 99,99
- время ответа в чате 1 секунда
- время загрузки чата (батча) 2 секунды

## Модели

### Профиль пользователя (9,5Mb):

- user_id: 16b
- name: 200b
- date_birth: 16b
- description: 4kb
- photo: 9Mb (batch)
- gender: 1b
- hobbie_id: 10*1b (10b)
- target_id: 5*1b (5b) // цель знакомства
- connection_counter_day: 1b (?)
- connection_counter_total: 8b (?)

### Сообщение чата (2,5Mb):

- message_id 16b
- from_user_id 16b
- to_user_id 16b
- mime_type 1b
- content_batch 2Mb
- next_batch_id 16b


## Нагрузка

### RPS

profile
- write 10_000_000 / 5 / 84200 = 23
- read 10_000_000 * 100 / 84200 = 12k

chat:
- write 10_000_000 * 400 / 84200 = 48k
- read 10_000_000 * 1000 / 84200 = 120k
  
### Troughput:

profile
- write 23 * 9,5Mb = 220Mb/s
- read 12_000 * 9,5Mb = 114Gb/s

chat:
- write 48_000 * 2,5Mb = 120Gb/s
- read 120_000 * 2,5Mb = 300Gb/s