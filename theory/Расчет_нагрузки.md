# Оценка нагрузки

## Расчет RPS

Для расчета приблизительного усредненного RPS (запросов в секунду) по DAU (количество уникальных пользователей за сутки) нужно использовать следующую формулу:

```
RPS = dau * avg_requests_per_day_by_user / 86 400 
```

Где: 
`avg_requests_per_day_by_user` - среднее количество запросов, которые генерирует каждый пользователь за один день 86 400 - 24 часа * 60 минут * 60 секунд

Представим, что у нас в системе ожидается 10 000 000 DAU, каждый из которых будет в среднем делать 5 запросов в систему каждый день. 
Тогда для нашего примера получится следующая арифметика:
```
RPS = 10 000 000 * 5 / 86 400 = 578
```
Если вы не знаете DAU, но знаете MAU (количество уникальных пользователей за месяц), то можно приблизительно перевести MAU в DAU, 
разделив значение этой метрики на 30 (количество дней в месяце).


## Расчет трафика

Для расчета приблизительного усредненного трафика по RPS нужно использовать следующую формулу:
```
Traffic = rps * avg_request_size
```
Где: 
`avg_request_size` - средний размер запроса в байтах

Представим, что у нас в системе ожидается 10 000 RPS, а средний размер запроса будет составлять 2КБ, тогда для нашего примера получится следующая арифметика: 
```
Traffic = 10 000 * 2КБ = 20 000КБ/с
```

## Расчет одновременных соединений

Для расчета приблизительного усредненного количества одновременно-открытых соединений важно понимать, что их количество будет равно количеству пользователей, которые одновременной пользуются приложением (если пользователь открывает одно соединение с приложением). Число одновременных пользователей зависит от многих факторов, таких как активность пользователей, тип приложения и так далее. Однако, обычно принимают, что в среднем, общее число одновременных пользователей онлайн составляет около 10% от DAU, поэтому для расчета одновременных соединений нужно использовать следующую формулу:
```
Connections = dau * 0.1
```
Где: 
0.1 - 10% от ежедневно активных пользователей

Представим, что у нас в системе ожидается 10 000 000 DAU, тогда для нашего примера получится следующая арифметика:
```
Connections = 10 000 000 * 0.1 = 1 000 000
```